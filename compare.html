<html>
  <head>
    <title>View Myanmar Text with Fonts
   </title>

  <link rel="stylesheet" type="text/css" href="/css/fonts.css">
  
   <script type="text/javascript" src="/js/shake-n-break.js">
   </script>

  <script type="text/javascript" src="/js/myzu.js">
  </script>

  <script type="text/javascript">
  function compareText(area1, area2) {
    var w1 = document.getElementById(area1);
    var w2 = document.getElementById(area2);
    var t1 = w1.value;
    var t2 = w2.value;
    
    var message;
    if ( t1.length != t2.length) {
      message = 'lengths ' + t1.length + ' <> ' + t2.length;
    } else {
      message = 'lengths: ' + t1.length + ' == ' + t2.length;
    }
    if (t1 != t2) {
      message += '  Texts are unequal.';
    }
    var s1 = t1.split('/[ \u104a\u104b\u100a0]/');
    var s2 = t2.split('/[ \u104a\u104b\u100a0]/');
    if (s1.length != s2.length) {
      message += '\nWords ' + s1.length + ' <> ' + s2.length;
    } else {
      message += '\nWords: ' + s1.length + ' == ' + s2.length;
    }

    var ndiffs = 0;
    for (i = 0; i < s1.length; i++) {
      if (i < s1.length) {
        if (s1[i] != s2[i]) {
          message += '\n  Words # ' + i +  ':\n' + s1[i] + '\n -----------------\n ' + s2[i];
          ndiffs += 1;
        }
      }    
    }
    if (ndiffs == 0) {
      message += '\nNo different words.';
    } else {
      message += '\n' + ndiffs + ' different words.';
    }

    var m1 = document.getElementById('diffinfo');
    m1.value = message;
  }
  
  function hexBytesToOutput(area1, area2) {
    // Prepare for the call to the backendvar xmlhttp;
	var input_area = document.getElementById(area1);
    var hexByteText = input_area.value;
    
	if (window.XMLHttpRequest)
	  {
	  // code for IE7+, Firefox, Chrome, Opera, Safari
	  xmlhttp=new XMLHttpRequest();
	  }
	else
	  {
	  // code for IE6, IE5
	  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	  }

    // Deal with the results	  
    xmlhttp.onreadystatechange=function()
	{
	  if(xmlhttp.readyState==4) {
	      var returned_json = xmlhttp.responseText
		  var output_area = document.getElementById(area2);
		  var json_obj = JSON.parse(returned_json);
		  // alert(json_obj.converted);

          output_area.innerHTML = json_obj.converted;
		  var hex_area = document.getElementById(area2);
		  var new_text = json_obj.converted;
          hex_area.value = textToHex(new_text);  
     }
	}
	
	// Set up the call to the backend.
	target = "/convertBtoC/?text=" + hexByteText;
	xmlhttp.open("GET", target, true);
	xmlhttp.send(null);	    
  }
  </script>
  </head>
  
  <body onload="onload()">

    <h1>Compare Myanmar text</h1>
    <p>
    <div>
      <textarea id="text1"  class='notosans'
        rows="4" cols="40">{{t1}}</textarea>
      Text 1
     </div>
     <input type="button" value="hex to text" onclick="hexToOutput('text1', 'text1')" />
     <input type="button" value="hex bytes to text" onclick="hexBytesToOutput('text1', 'text1')" />
     <input type="button" value="hex bytes to hex chars" onclick="hexBytesToHexChars('text1', 'text1')" />


    <div>
      <textarea id="text2"  class='notosans'
        rows="4" cols="40">{{t2}}</textarea>
      Text 2
    </div>
         <input type="button" value="hex to text" onclick="hexToOutput('text2', 'text2')" />

    <hr>
    <div>
      <input type="button" value="Compare"
       onclick="compareText('text1', 'text2')" />
    </div>
    
    <div>
    <p>Compare results:</P>
    <textarea id="diffinfo" class='notosans14' rows="4" cols="40"></textarea>
    
    <hr>
    <br />
    <form action="/feedback" method="get">
      <input type="submit" value="Send feedback" />
    </form>  
  </body>
</html>